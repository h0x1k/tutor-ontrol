services:
  tutor-app:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "8000:8000"
    volumes:
      - ".:/app"
    working_dir: /app
    environment:
      PYTHONPATH: /app
      ENVIRONMENT: development
    command: python -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    networks:
      - app-network

  versioncontrol:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "8001:8001"
    volumes:
      - "vc_data:/app/repositories"
      - "./version_control:/app/version_control"
    working_dir: /app
    environment:
      PYTHONPATH: /app
      ENVIRONMENT: development
      VC_STORAGE_PATH: /app/repositories
    command: python -m uvicorn version_control.main:app --host 0.0.0.0 --port 8001 --reload
    networks:
      - app-network

volumes:
  vc_data:

networks:
  app-network:
    driver: bridge