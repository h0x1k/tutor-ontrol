# üîí HTTPS Setup Complete

HTTPS is now configured for both dev and prod environments!

## ‚úÖ What's Configured

- **HTTPS on port 443** - SSL/TLS encryption enabled
- **HTTP redirects to HTTPS** - Automatic redirect from port 80 to 443
- **Self-signed certificates** - Generated for development
- **Security headers** - HSTS, X-Frame-Options, etc.
- **HTTP/2 support** - Enabled for better performance

## üåê Access URLs

### Development
- **HTTPS:** https://localhost
- **HTTP:** http://localhost (redirects to HTTPS)

### Production
- **HTTPS:** https://localhost
- **HTTP:** http://localhost (redirects to HTTPS)

## ‚ö†Ô∏è Browser Warning (Development)

Since we're using **self-signed certificates** for development, your browser will show a security warning:

1. **Chrome/Edge:** Click "Advanced" ‚Üí "Proceed to localhost (unsafe)"
2. **Firefox:** Click "Advanced" ‚Üí "Accept the Risk and Continue"
3. **Safari:** Click "Show Details" ‚Üí "visit this website"

This is **normal for development** - the certificate is self-signed, not from a trusted CA.

## üîê SSL Certificates

### Development
- **Location:** `dev/nginx/ssl/`
- **Files:**
  - `cert.pem` - Certificate
  - `key.pem` - Private key
- **Generated by:** `./nginx/generate-ssl.sh`

### Production
- **Location:** `prod/nginx/ssl/`
- **Files:**
  - `cert.pem` - Certificate
  - `key.pem` - Private key
- **Generated by:** `./nginx/generate-ssl.sh`

## üîÑ Regenerate Certificates

If you need to regenerate certificates:

```bash
# Dev
cd tutor-ontrol-dev
rm -rf nginx/ssl/*
./nginx/generate-ssl.sh

# Prod
cd tutor-ontrol-prod
rm -rf nginx/ssl/*
./nginx/generate-ssl.sh
```

## üöÄ Using Real Certificates (Production)

For production, use real SSL certificates:

### Option 1: Let's Encrypt (Free)

```bash
# Install certbot
sudo apt-get install certbot

# Get certificate
sudo certbot certonly --standalone -d yourdomain.com

# Copy certificates
sudo cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem prod/nginx/ssl/cert.pem
sudo cp /etc/letsencrypt/live/yourdomain.com/privkey.pem prod/nginx/ssl/key.pem
sudo chmod 644 prod/nginx/ssl/cert.pem
sudo chmod 600 prod/nginx/ssl/key.pem
```

### Option 2: Your CA

1. Get certificates from your Certificate Authority
2. Place them in `prod/nginx/ssl/`:
   - `cert.pem` - Your certificate
   - `key.pem` - Your private key
3. Restart containers

## üß™ Testing

### Test HTTPS

```bash
# Test HTTPS (ignore certificate warning)
curl -k https://localhost/

# Test HTTP redirect
curl -I http://localhost/
# Should show: HTTP/1.1 301 Moved Permanently
```

### Check Certificate

```bash
# View certificate info
openssl s_client -connect localhost:443 -servername localhost < /dev/null 2>/dev/null | openssl x509 -noout -text
```

## üìã Configuration Details

### Nginx Configuration

- **HTTP (port 80):** Redirects to HTTPS
- **HTTPS (port 443):** Serves the application
- **SSL Protocols:** TLSv1.2, TLSv1.3
- **SSL Ciphers:** High security, no weak ciphers
- **Security Headers:** HSTS, X-Frame-Options, etc.

### Docker Configuration

- **Ports:** `80:80` (HTTP), `443:443` (HTTPS)
- **Volumes:** SSL certificates mounted from `./nginx/ssl/`
- **Read-only:** Certificates mounted as read-only for security

## üîß Troubleshooting

### Certificate Not Found

**Error:** `SSL: certificate not found`

**Solution:**
```bash
# Generate certificates
cd tutor-ontrol-dev
./nginx/generate-ssl.sh

# Or for prod
cd tutor-ontrol-prod
./nginx/generate-ssl.sh

# Restart containers
docker-compose restart frontend  # or nginx for prod
```

### Port 443 Already in Use

**Error:** `port is already allocated`

**Solution:**
```bash
# Check what's using port 443
sudo lsof -i :443

# Stop conflicting service or change port in docker-compose.yml
```

### Browser Won't Accept Certificate

**Solution:**
- This is normal for self-signed certificates
- Click "Advanced" ‚Üí "Proceed anyway"
- Or add exception in browser settings

## ‚úÖ Summary

- ‚úÖ HTTPS enabled on port 443
- ‚úÖ HTTP redirects to HTTPS
- ‚úÖ Self-signed certificates generated
- ‚úÖ Security headers configured
- ‚úÖ HTTP/2 enabled
- ‚úÖ Ready for production (use real certificates)

**Access:** https://localhost

